<?php


namespace Controller;
use Lib\Helper;
use Model\Answer;
use Model\Question;

defined('_Sdef') or exit();

class WidgetController extends DisplayController
{
    protected $index;


    public function viewQuestionnaire(){

        if (!isset($_SESSION['auth'])){
            $this->app->notFound();
        }elseif($_SESSION['status'] != 'Админ'){
            $this->app->notFound();
        }
        $this->index = $this->app->view()->fetch('Admin/oprosnik.php', [
            'uri' => $this->uri,
            'app' => $this->app,
            'helper' => Helper::getInstance()

        ]);
        $this->display();
    }

    public function addQuestionnaire(){
        $questDB = new Question();
        $answerDB = new Answer();
        if (!empty($_POST['q'])){
           $id_quest = $questDB->addQuestion($_POST['q']);
           for($i = 1; $i <= 4; $i++){
               if (!empty($_POST['a'.$i])){
                   $answerDB->addAnswers($id_quest,$_POST['a'.$i]);
               }else{
                   break;
               }
           }

        }
    }
    protected function display()
    {
        $this->main = $this->index;
        parent::display(); // TODO: Change the autogenerated stub
    }
}