<?php


namespace Controller;
use Lib\Helper;

defined('_Sdef') or exit();

class IndexController extends DisplayController
{
    protected $page;
    public function execute($param = [])
    {

        return $this->display();
    }

    protected function display()
    {

        $posts =  $this->model->getPostL10();
        foreach ($posts as $key => $val){
            $posts[$key]['cats'] = $this->model->getCatPostL2($posts[$key]['id']);
        }
        $newPosts = $this->model->getPostL5();
        foreach ($newPosts as $key => $val){
            $newPosts[$key]['cats'] = $this->model->getCatPostL2($newPosts[$key]['id']);
        }
        $this->main = $this->app->view()->fetch('indexbar.tpl.php',[
            'app' => $this->app,
            'uri' => $this->uri,
            'posts' => $posts,
            'helper' => Helper::getInstance(),
            'newPosts' => $newPosts,
            'years' => $years,
        ]);
        parent::display(); // TODO: Change the autogenerated stub
    }

}